{% load partials %}

{# This page render the project details with steps and the tasks if a step is selected #}

{% partialdef step_item %}
    <div class="card card-compact bg-base-100 shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 p-0
        {% if inventory.id == inventory_id %}active-step{% endif %}"
        hx-get="{% url 'projects:inventory:inventory_detail' project_id=project_id inventory_id=inventory.id %}"
        hx-target="#content-block"
        hx-swap="innerHTML"
        hx-push-url="true"
        {% if oob %} hx-swap-oob="true" {% endif %}
        hx-on::before-request="document.querySelectorAll('#sidebar .card').forEach(el => el.classList.remove('active-step')); this.classList.add('active-step')"
        id="step-card-{{step.id}}">
        <div class="card-body">
            <div class="flex items-start justify-between gap-2">
                <h3 class="font-semibold text-base-content">
                    {% if inventory.icon %}
                        <span class='inline-flex w-6 justify-start'>{{ inventory.icon }}</span>
                    {% endif %}
                    <span class='inline-flex'>{{ inventory.title }}</span>
                </h3>
            </div>
        </div>
    </div>
{% endpartialdef %}

{% for inventory in inventories %}
    {% partial step_item %}
{% endfor %}