{% with status=step.get_status %}
<div class="card card-compact bg-base-100 shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4
    {% if status == 'Not Started' %}border-error
    {% elif status == 'In Progress' %}border-warning
    {% elif status == 'Completed' %}border-success
    {% else %}border-base-300{% endif %}"
    hx-get="{% url 'projects:step_tasks' project_id=project.id step_id=step.id %}"
    hx-target="#tasks-area-list"
    hx-swap="innerHTML"
    hx-swap-oob="true"
    id="step-card-{{step.id}}">
    <div class="card-body">
        <div class="flex items-start justify-between gap-2">
            <h3 class="font-semibold text-base-content">{{step.to_str}}</h3>
            <div class="badge badge-sm
                {% if status == 'Not Started' %}badge-error
                {% elif status == 'In Progress' %}badge-warning
                {% elif status == 'Completed' %}badge-success
                {% else %}badge-ghost{% endif %}"
                id="status-badge-{{ id }}">
                {{ status }}
            </div>
        </div>
        <p class="text-sm text-base-content/70">{{step.get_progress_text}}</p>
    </div>
</div>
{% endwith %}