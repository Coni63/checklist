

<div class="bg-white p-4 rounded-lg shadow-md" id="comment-{{ comment.id }}">
    <div class="card-body p-0">
        <div class="flex items-start justify-between gap-2 mb-2">
            <div class="flex items-center gap-2 flex-wrap">
                <span class="font-semibold text-base-content">{{ comment.user.username }}</span>
                <span class="text-xs text-base-content/60">{{ comment.created_at|timesince }} ago</span>
                {% if comment.updated_at != comment.created_at %}
                    <span class="badge badge-xs badge-ghost">edited</span>
                {% endif %}
            </div>
            {% if comment.user == user or 'admin' in roles %}
            <div>
                <button
                    class="btn btn-ghost btn-xs"
                    hx-post="{% url 'projects:checklist:comment_edit' project_id=project_id step_id=step_id task_id=task_id comment_id=comment.id %}"
                    hx-target="#comment-{{ comment.id }}"
                    hx-swap="outerHTML">
                    <i data-lucide="pencil" style="width:16px;height:16px;"></i>
                </button>
                <button
                    class="btn btn-ghost btn-xs"
                    hx-delete="{% url 'projects:checklist:comment_delete' project_id=project_id step_id=step_id task_id=task_id comment_id=comment.id %}"
                    hx-target="#comment-{{ comment.id }}"
                    hx-swap="outerHTML"
                    hx-confirm="Are you sure you want to delete this comment?">
                    <i data-lucide="trash-2" style="width:16px;height:16px;"></i>
                </button>
            </div>
            {% endif %}
        </div>
        <p class="text-base-content/80 text-sm">{{ comment.comment_text }}</p>
    </div>
</div>